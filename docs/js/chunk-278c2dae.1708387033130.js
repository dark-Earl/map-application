(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-278c2dae"],{"7fa0":function(t,e,n){"use strict";n("d63c")},d63c:function(t,e,n){},dda8:function(t,e,n){"use strict";n("ebfc")},e954:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",[t.mapShow?e("map-interests",{attrs:{coordinate:t.coordinate,initCity:t.initCity}}):t._e()],1)])},i=[],s=(n("7f7f"),function(){var t=this,e=t._self._c;return t.mapDisplay?e("div",[e("el-amap",{ref:"elAmap",staticClass:"amap-demo",attrs:{vid:"amap",id:"amap",plugin:t.plugin,center:t.center,zoom:t.zoom}},[t.multiPoint?e("el-amap-polygon",{attrs:{path:t.polygons,strokeColor:"red",fillColor:"red",fillOpacity:"0.2"}}):t._l(t.markers,(function(t,n){return e("el-amap-marker",{key:n,attrs:{position:t}})})),t.window.visible?e("div",{staticClass:"mapCenterBottom",attrs:{id:"info-window"}},[e("a-tabs",{attrs:{"default-active-key":"famousScenery"},on:{change:t.changeTypeDisplay}},[e("a-tab-pane",{key:"famousScenery",staticStyle:{height:"335px","overflow-y":"scroll"},attrs:{tab:"风景名胜"}},t._l(t.famousScenery,(function(n,a){return e("div",{key:n.id,staticClass:"list-loc",on:{click:function(e){return t.movePoint(n.location,n.name,a+1)}}},[e("span",{staticClass:"fl"},[e("i",{staticClass:"icon-loc01"},[e("span",[t._v(t._s(a+1))])]),t._v("  "+t._s(n.name))]),e("span",{staticClass:"fr mr45"},[e("i",{staticClass:"icon-loc02"}),t._v(t._s(n.distance)+"米")]),e("div",{staticClass:"clear"})])})),0),e("a-tab-pane",{key:"parkPlaza",staticStyle:{height:"335px","overflow-y":"scroll"},attrs:{tab:"公园广场","force-render":""}},t._l(t.parkPlaza,(function(n,a){return e("div",{key:n.id,staticClass:"list-loc",on:{click:function(e){return t.movePoint(n.location,n.name,a+1)}}},[e("span",{staticClass:"fl"},[e("i",{staticClass:"icon-loc01"},[e("span",[t._v(t._s(a+1))])]),t._v("  "+t._s(n.name))]),e("span",{staticClass:"fr mr45"},[e("i",{staticClass:"icon-loc02"}),t._v(t._s(n.distance)+"米")]),e("div",{staticClass:"clear"})])})),0)],1)],1):t._e()],2),e("div",[e("a-button",{on:{click:t.resetPoint}},[t._v("返回重新选点")])],1)],1):t._e()}),o=[],r=n("f63b"),c=r["a"],l=(n("dda8"),n("7fa0"),n("2877")),p=Object(l["a"])(c,s,o,!1,null,"93685018",null),u=p.exports,m={components:{mapInterests:u},mounted:function(){this.sleep()},data:function(){return{detail:{},completed:!1,mapShow:!1,coordinate:this.$route.query.resultPoint,initCity:this.$route.query.initCity}},methods:{sleep:function(){var t=this;setTimeout((function(){t.mapShow=!0}),1500)}}},f=m,h=Object(l["a"])(f,a,i,!1,null,null,null);e["default"]=h.exports},ebfc:function(t,e,n){},f63b:function(t,e,n){"use strict";(function(t){n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("7f7f");function a(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw o}}}}function i(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e["a"]={props:["coordinate","initCity"],data:function(){var t=this,e=JSON.parse(this.coordinate),n=[e],a=e;return{multiPoint:n.length>1,zoom:15,markers:n,polygons:n,map:null,center:a,window:{visible:!1},markersOthers:[],famousScenery:[],parkPlaza:[],lng:0,lat:0,loaded:!1,plugin:[{pName:"MapType",defaultType:1,showTraffic:!1,showRoad:!0},{pName:"Scale",position:"LB"},{pName:"ToolBar",position:"LT"}],events:{click:function(e){t.clickPoint(e)}},mapEle:null,makersTitle:[],mapDisplay:!1,count:0,xSite:50,ySite:50}},mounted:function(){var t=this;this.renderTime(),this.closeMouseOver(),this.$nextTick((function(){setTimeout((function(){document.getElementsByClassName("amap-maptypecontrol")[0]?(document.getElementsByClassName("amap-maptypecontrol")[0].style.opacity="0",t.displayWindow(t.center),t.mapEle=t.$refs.elAmap.$$getInstance(),t.moveMap()):location.reload()}),2e3)}))},methods:{clickPoint:function(t){var e=[t.lnglat.lng,t.lnglat.lat];this.displayWindow(e)},displayWindow:function(t){this.getMapInfo(t,"风景名胜","famousScenery"),this.getMapInfo(t,"公园广场","parkPlaza"),this.window.visible=!0,this.window.position||(this.window.position=t),this.window.visible?this.setTypeMarker(this["famousScenery"]):this.removeMarker()},resetPoint:function(){this.$router.push({name:"mapAnnotate",params:{},query:{}})},changeTypeDisplay:function(t){this.makersTitle&&this.$refs.elAmap.$$getInstance().remove(this.makersTitle),this.setTypeMarker(this[t])},renderTime:function(){var t=this;setTimeout((function(){t.mapDisplay=!0}),500)},getMapInfo:function(t,e,n){var a=this;if(!a[n]||0===a[n].length){var i=new AMap.PlaceSearch({type:e,pageSize:50,pageIndex:1,city:this.initCity,citylimit:!0}),s=t;i.searchNearBy("",s,6e4,(function(t,e){"OK"===e.info&&(a[n]=e.poiList.pois,"famousScenery"===n&&a.setTypeMarker(a["famousScenery"]))}))}},setTypeMarker:function(t){this.removeMarker();var e,n=1,i=a(t);try{for(i.s();!(e=i.n()).done;){var s=e.value,o=s.location.lng,r=s.location.lat;this.setMarker([o,r],n),n++}}catch(c){i.e(c)}finally{i.f()}},setMarker:function(t,e){var n=new AMap.Marker({position:t,content:'<i class="icon-loc01"><span>'.concat(e,"</span></i>")});n.setMap(this.$refs.elAmap.$$getInstance()),this.markers.push(n)},movePoint:function(t,e,n){this.makersTitle&&this.$refs.elAmap.$$getInstance().remove(this.makersTitle);var a=[t.lng,t.lat],i="transform:scale(2)",s="width: 200px;\n    height:auto;\n    background-color: white;margin-left:-100px;text-align:center;",o=new AMap.Marker({position:a,content:'<i class="icon-loc01" style="'.concat(i,'">').concat(n,"</i><div class='map-dot' style=\"").concat(s,'">').concat(e,"</div>")});this.mapEle.setCenter(a),this.moveMap(),o.setMap(this.$refs.elAmap.$$getInstance()),this.makersTitle.push(o)},removeMarker:function(){this.markers&&this.$refs.elAmap&&this.$refs.elAmap.$$getInstance().remove(this.markers)},moveMap:function(){this.mapEle.panBy(-120,-200)},closeMouseOver:function(){var e=this;t("#amap").on("mouseout",(function(){e.$refs.elAmap.$$getInstance().setStatus({scrollWheel:!1})})),t("#amap").on("mouseenter",(function(){e.$refs.elAmap.$$getInstance().setStatus({scrollWheel:!1})}))}}}}).call(this,n("1157"))}}]);